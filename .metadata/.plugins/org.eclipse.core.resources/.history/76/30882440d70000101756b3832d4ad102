package controller;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.math.BigDecimal;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import models.Salon;
import models.Appointment;
import models.SalonListener;
import models.SalonEvent;

import java.util.ArrayList;
import java.util.List;

public class SalonController implements ActionListener {

    private Salon salon;
    
    public SalonController(Salon salon) {
        this.salon = salon;
    }

    public void addSalonListener(SalonListener listener) {
        listeners.add(listener);
    }

    public void createAppointment(Appointment appointment) {
        salon.addAppointment(appointment);
        notifyListeners(appointment);
    }

    private void notifyListeners(Appointment appointment) {
        SalonEvent event = new SalonEvent(salon, appointment);
        for (SalonListener listener : listeners) {
            listener.update(event);
        }
    }

    public BigDecimal getTotalDoDia() {
        return this.salon.getTotal();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String command = e.getActionCommand();
        if (command.equals("NOVO AGENDAMENTO")) {
            new view.AppointmentPanel(this);
        } else if (command.equals("CADASTRAR SERVIÃ‡O")) {
            new view.ServicePanel(this);
        }
    }
}

